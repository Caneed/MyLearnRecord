# 什么是 HTTP

[TOC]

### 简介

HTTP 是一种`超文本传输协议(Hypertext Transfer Protocol)`,超文本传输协议可以分别分隔成三个词:超文本,传输和协议.
它们的层级关系:协议包含传输，传输包含了超文本

### 超文本

早期电脑之间传输的数据只限于文本，随着后来的发展，电脑之间还可以传输图片，视频，音频等文件，随着发展，文本的语义被扩大了，语义扩大的文本就被称为超文本

### 传输

两台计算机之间进行传输数据，超文本会被转换为二进制数据。由传输载体(光缆，同轴电缆，电线)等把一个二进制数据包由一个终端传输到另一个终端的过程，叫做传输。
一般把传输数据的一方叫做请求方，把接收数据的一方叫做应答方。

### 协议

在 HTTP 中的协议一般指网络协议，网络协议就是在网络中的数据传输，管理信息的一些规范，也就是说，计算机之间的通信也需要协议来规范。
**HTTP 协议总的来说就是在网络中传输超文本数据的一种规范**

### 和 HTTP 有关的组件

##### 网络模型

为了给网络协议的设计提供一个结构，网络设计者以分层(layer)的方式组织协议，每个协议属于层次模型之一。每一层都是向它的上一层提供服务(service)，即所谓的服务模型(service model)。每个分层中所有的协议称为 协议栈(protocol stack)。因特网的协议栈由五个部分组成：物理层、链路层、网络层、运输层和应用层。我们采用自上而下的方法研究其原理，也就是应用层 -> 物理层的方式。

##### 应用层

应用层是网络协议和网络应用程序存放的层级，Internet 的应用层包括了很多协议，比如 Web 的 HTTP 协议；传输邮件的 SMTP 协议；端系统文件上传协议 FTP；还有域名解析的 DNS 协议。应用层协议分布在多个端系统上，一个端系统应用程序与另外一个端系统应用程序交换信息分组，我们把位于应用层的信息分组称为**报文(message)**。

##### 运输层

Internet 的运输层在应用程序断点之间传输应用程序报文，该层主要有两个协议 TCP 和 UDP 协议。这两种协议的任意一个都能传输报文。
TCP:TCP 向它的应用程序提供了面向连接的服务，它可以控制并可以确认报文是否到达，而且提供了拥塞机制来控制网络的传输，当网络拥塞时，TCP 会抑制传输的速率
UDP:UDP 向它的应用程序提供了无连接服务，它没有流量的控制也没有拥塞机制。

在运输层的分组叫做`报文段(segment)`

##### 网络层

在网络层，负责将`数据报`从一台主机传输到另一台主机，网络层比较重要的协议为`IP协议`
网络层又叫做`IP 层

##### 链路层

应用层负责的是应用程序之间的通信，运输层负责给应用程序之间提供传输，IP 层负责约定发送位置，而在链路层才是真正发送数据。链路层的例子包括以太网，wifi 和电缆接入的`DOCSIS`协议,链路层的分组被称为帧

##### 物理层

虽然链路层的作用是将帧从一个端系统运输到另一个端系统，而物理层的作用是将帧中的一个个 比特 从一个节点运输到另一个节点，物理层的协议仍然使用链路层协议，这些协议与实际的物理传输介质有关，例如，以太网有很多物理层协议：关于双绞铜线、关于同轴电缆、关于光纤等等。

### OSI 模型

OSI 模型相较常规的网络模型要多两个分层，分别是表示层和会话层。表示层主要包括数据压缩和数据加密以及数据描述，数据描述使得应用程序不必担心计算机内部存储格式的问题，而会话层提供了数据交换的定界和同步功能，包括建立检查点和恢复方案。

### 浏览器

浏览器是 HTTP 协议的主要载体，浏览器的正式名字为`Web Broser`,就是检索，查找网络资源的应用程序

##### 在地址栏输入 URL 后，发生了什么?

在浏览器的地址栏输入 url 后，浏览器会向 DNS 域名服务器上传此 url，在 dns 域名服务器中将它映射为 ip 地址，在向服务器去请求此 ip 地址，再由服务器返回我们想要的结果(html 编码形式返回给浏览器)浏览器再去将 html 解析为我们看到的网页

### web 服务器

Web 服务器的正式名称叫做 Web Server，Web 服务器一般指的是网站服务器，上面说到浏览器是 HTTP 请求的发起方，那么 Web 服务器就是 HTTP 请求的应答方，Web 服务器可以向浏览器等 Web 客户端提供文档，也可以放置网站文件，让全世界浏览；可以放置数据文件，让全世界下载。目前最主流的三个 Web 服务器是 Apache、 Nginx 、IIS。

### 与 HTTP 有关的协议

HTTP 属于应用层的协议，同时它也需要其它分层的协议与它配合才能完成信息的交换

在 HTTP 完成一次请求的过程中需要的协议:

##### TCP/IP

TCP 和 IP 协议一般称之为`协议簇`，TCP 全称为`Transmission Control Protocol`，`控制传输协议`，HTTP 通过 TCP 协议可以有效，可靠的传输数据。
IP 协议的全称为`Internet Protocol`，它主要解决了双方寻址的问题，计算机之间要交换数据首先要知道对方的 IP 地址，所以 HTTP 需要 IP 协议来寻址。

##### DNS

DNS 协议全称为`Domain Name System`,`域名系统`，它的主要作用是将 IP 地址变成我们容易记住的网站名

##### URI/URL

URI 全称是`Uniform Resource Identifier`统一资源标识符，它主要是用来规范互联网资源，让它们的资源路径命名为一种比较规范的模式

URL 全称是`Uniform Resource Locator`统一资源定位符，它就是俗称的网址，它是 URI 的一个子集

同时 URI 中除了 URL，也包括了 URN(统一资源名称)

##### HTTPS

HTTP 一般是明文传输，容易被窃取信息，所以出现了 HTTPS,全称是`Hyper Text Transfer Protocol over SecureSocket Layer`,HTTPS 和 HTTP 有很大的不同在于 HTTPS 是以安全为目标的 HTTP 通道，在 HTTP 的基础上通过传输加密和身份认证保证了传输过程的安全性。HTTPS 在 HTTP 的基础上增加了 SSL 层，也就是说 HTTPS = HTTP + SSL。

### HTTP请求响应的过程

在浏览器中输入URI并进行回车时，发生了如下过程:

- DNS首先会将网址的uri映射为ip地址，http客户端发送一个tcp连接向该网址的服务器，在客户端和服务器之间会尤一个套接字来跟它相连。
- http客户端向服务器发送一个http请求的报文，该报文中包括了输入路径uri网址的资源
- http服务器通过套接字接收此报文，并开始解析工作，将检索出来的资源对象进行封装，封装到http的响应报文中，通过套接字发回客户端。
- http服务器开始通知TCP断开TCP连接，在客户完全收到响应报文后，TCP连接会被断开。
- http客户端收到响应报文之后开始检查报文
- 最后将检查到的html进行解析并呈现到页面上

### HTTP请求的特征

- 支持B/S模式
- 简单快速
- 灵活，允许请求任何类型的数据对象
- 无连接请求，在每一次请求结束都会断开TCP连接，这样可以节省传输时间
- 无状态请求，指的是它不会储存上一次请求的数据，如果本次需要上一次的数据，那么需要整个重新进行请求，这样导致它的请求数据量增大，但是在不需要前一次的请求数据的时候它的效率就比较高


### HTTP请求方法

- GET(请求资源)
- POST(传输实体)
- PUT(传输文件)
- HEAD(获取响应首部)
- DELETE(删除文件)
- OPTIONS(询问支持的方法)
- TRACE(追踪路径)
- CONNECT


### HTTP请求URI

完整域名下的URI:'http://www.example.com:80/path/to/myfile.html?key1=value1&key2=value2#SomewhereInTheDocument'

- http://  表示的是协议
- www.example.com  表示的是域名，也就是经过DNS解析后的IP地址
- :80 表示的是端口号
- /path/to/myfile.html  表示的是请求的资源路径
- ?key1=value1&key2=value2  表示的是传输的参数
- #SomewhereInTheDocument  表示的是锚点