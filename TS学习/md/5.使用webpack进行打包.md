# 打包

[TOC]

### 步骤

1. `npm init -y` 初始化项目
2. `npm i -D webpack webpack-cli ts-loader typescript`安装 webpack 和 webpack 脚手架和 ts 的编译加载以及 ts 编译器

3. 创建`webpack.config.js`文件,内容:

```js
const path = require("path");

// 配置信息
module.exports = {
  // 入口文件
  entry: "./src/index.ts",
  // 输出文件
  output: {
    // 输出路径
    path: path.resolve(__dirname, "dist"),
    // 输出文件名
    filename: "bundle.js",
  },
  // 模块
  module: {
    // 打包规则
    rules: [
      {
        // test表示筛选对哪些文件进行打包规范
        test: /\.ts$/,
        // 使用的loader
        use: "ts-loader",
        // 排除哪些文件
        exclude: /node-modules/,
      },
    ],
  },
};
```

然后在`package.json`的`script`中添加`"build":"webpack"`

键入命令`npm run build`就打包完成

### 插件

在`html`文件中想要使用打包好的项目时可以使用`script`标签来进行引入,当有多个打包文件，就可以使用插件

```sh
npm i -D html-webpack-plugin
```

在`webpack.config.js`中引入

```js
const plugin = require("html-webpack-plugin");
```

然后在配置项中配置

```js
// 插件
plugins: [new plugin()];
```

配置之后就可以自动生成 html 文件了

也可以在插件中进行配置

```js
new plugin({
  title: "自定义标题",
  // 模板，属性值是一个路径，定义一个模板给它去配置，打包出来的html文件就照着模板的来
  // template
});
```

### 启动

安装 webpack 插件`npm i -D webpack-dev-server`

然后在`package.json`中设置命令` "start": "webpack serve"`

最后`npm start`启动服务

### 扩展

在 output 中添加 clean:true,表示每次编译或者文件发生变化时就会自动清空 dist 下的文件

`resolve`配置项中的`extensions`:表示指定哪些文件可以作为模块来进行使用

```js
resolve: {
  extensions: [".ts", ".js"];
}
```
