<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="../../../lib/react.development.js"></script>
    <script src="../../../lib/react-dom.development.js"></script>
    <script src="../../../lib/babel.min.js"></script>
    <script src="../../../lib/bootstrap.js"></script>
    <link rel="stylesheet" href="../../../lib/bootstrap.css" />
  </head>
  <body>
    <div id="root"></div>
  </body>
  <script type="text/babel">
    class Tr extends React.Component {
      constructor(props) {
        super(props);
      }
      onDelete(ev){;
        this.props.onDelete(ev.target.id)
      }
      render() {
        return (
          <tr>
            <td>{this.props.id}</td>
            <td>{this.props.name}</td>
            <td>{this.props.sex}</td>
            <td>
              <button id={this.props.id} onClick={this.onDelete.bind(this)}>删除</button>
            </td>
          </tr>
        );
      }
    }

    class Table extends React.Component {
      constructor(props) {
        super(props);

        this.state = {
          list: [
            {
              id: 1,
              name: "老王",
              sex: "male",
            },
            {
              id: 2,
              name: "老李",
              sex: "female",
            },
          ],
        };
      }

      onDelete(ev){
        let newList=this.state.list.filter(value=>value.id!=ev)
        console.log(newList);
        this.setState({
          list : newList
        })
      }
      render() {
        return (
          <table>
            <thead>
              <tr>
                <th>id</th>
                <th>姓名</th>
                <th>性别</th>
                <th>操作</th>
                </tr>
            </thead>
            <tbody>
              {this.state.list.map(item=><Tr onDelete={this.onDelete.bind(this)} key={item.id} name={item.name} sex={item.sex} id={item.id}/>)}
            </tbody>
          </table>
        );
      }
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<Table />);
  </script>
</html>
