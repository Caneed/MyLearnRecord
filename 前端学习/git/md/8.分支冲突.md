# 分支冲突

[TOC]

### 使用场景

创建并切换到一个新的分支

```sh
git switch -c bran
```

修改文件并提交到新创建的 `bran` 分支上

这时切换回主分支`main`上,切换回主分支后会提醒

```sh
Switched to branch 'main'
Your branch is ahead of 'origin/main' by 1 commit.
  (use "git push" to publish your local commits)

```

意思是在`bran`分支上领先了主分支一个版本

然后在主分支上再次更改文件并提交

此时如果再合并分支，就会发生错误

```
Auto-merging readme.txt
CONFLICT (content): Merge conflict in readme.txt
Automatic merge failed; fix conflicts and then commit the result.
```

git 报错 readme.txt 文件存在冲突，必须手动解决冲突后再提交。git status 也可以告诉我们冲突的文件：

```
You have unmerged paths.
  (fix conflicts and run "git commit")
  (use "git merge --abort" to abort the merge)

Unmerged paths:
  (use "git add <file>..." to mark resolution)
        both modified:   readme.txt
```

此时直接查看文件内容

```
<<<<<<< HEAD
this is the new line of branch dev

this is another commit on main which after the commit of branch bran
=======
this is the new line of branch

this is the new branch called bran
>>>>>>> bran
```

Git用<<<<<<<，=======，>>>>>>>标记出不同分支的内容

这时需要手动修改主分支上的内容，比如清除主分支上的更新或者将两个更新其中之一删除之后再合并

然后再合并分支并删除分支