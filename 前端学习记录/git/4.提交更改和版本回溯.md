# 实际使用

[TOC]

### 初始化仓库

使用命令来初始化仓库

```
>git init
```

初始化之后有一个`.git`文件

然后新增一个`1.txt`文件，写一些文本

1. 使用命令

```
git add 1.txt
```

将文件添加到仓库

2. 使用命令

```
git commit -m "描述信息"
```

将文件提交到仓库

### 修改

在提交了`1.txt`之后,在文件中修改`1.txt`,比如添加一段文本

可以使用`git status `来查看文件状态

```
On branch main
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   1.txt

no changes added to commit (use "git add" and/or "git commit -a")
```

此命令可以看到处于提交之后的文件的状态，这里 1.txt 被修改了之后有提示

如果想看 1.txt 具体哪里被修改了,可以使用 `git diff` 这个命令

```
diff --git a/1.txt b/1.txt
index c185167..c5595de 100644
--- a/1.txt
+++ b/1.txt
@@ -1 +1,3 @@
-this is a project for show how to use git and have a good command of it
\ No newline at end of file
+this is a project for show how to use git and have a good command of it
+
+this is some change after my first commit
\ No newline at end of file
```

这样可以看到两次的对比

看完对比之后可以继续将修改后的文件 add 到仓库 `git add 1.txt`

添加之后查看 1.txt 现在的状态

```
On branch main
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
        modified:   1.txt
```

这里提示 changes to be committed 表示将要被提交的更新，
之后就可以直接 git commit ""

```
[main 2008335] add distributed
 1 file changed, 3 insertions(+), 1 deletion(-)
```

### 版本库查看和回溯

在提交了第二个版本 add distributed 之后，再次修改 1.txt 并将其提交

提交完了之后，此文件就有了三个版本

可以使用命令 git log 查看

```
commit e4c15f4c9fff58afbe7fab7038267460ef4d06ed (HEAD -> main)
Author: dedsec <1115659949@qq.com>
Date:   Thu Nov 10 09:32:17 2022 +0800

    append file

commit 2008335508e3cafa24f60dbf40e74fa8bc446382
Author: dedsec <1115659949@qq.com>
Date:   Thu Nov 10 09:28:50 2022 +0800

    add distributed

commit b691c75894e2fe60e62d6596465fae38c51fdee4
Author: dedsec <1115659949@qq.com>
Date:   Thu Nov 10 09:14:52 2022 +0800

    commit 1.txt
```

git 根据时间戳将三个版本都列出来

如果想要回退一个版本

可以使用命令 git reset --hard HEAD^

**HEAD^表示上个版本 HEAD^^表示上两个版本，如果版本过长，可以使用 HEAD~n，n 代表版本号**

```
HEAD is now at 2008335 add distributed
```

此时文件已经回退到了上一个版本了

如果回退版本之后想要原来的版本,可以使用 git reset --hard 加上失去的版本的版本号就可以

或者使用 git reflog 命令来查看历史的命令

可以在历史命令中查看版本的版本号，然后再用 git reset --hard commitId 来进行版本更替，
版本号不需要精确输入，git 会自动寻找。

```
HEAD is now at e4c15f4 append file
```

总结:
**HEAD指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭，使用命令git reset --hard commit_id。
穿梭前，用git log可以查看提交历史，以便确定要回退到哪个版本。
要重返未来，用git reflog查看命令历史，以便确定要回到未来的哪个版本。**